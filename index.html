<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo List</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <section id="main">
        <div class="container">
            <input id="addText" type="text" placeholder="What To Do" required>
            <button id="submitButton" onclick="mergeFunctions()"> Add </button>
        </div>
        <ul id="list">
            <h3>TO-DO-LIST</h3>
        </ul>
    </section>

    <script>

        function mergeFunctions() {
            addTodo();
            printTodos();
            storeItems();
        }

        var todos = [];
        function addTodo() {
            const input = document.querySelector("#addText").value;
            todos.push(input);
        }

        function printTodos() {
            const list = document.getElementById("list");
            for (var i = todos.length - 1; i < todos.length; i++) {
                toWrite = todos[todos.length - 1];
                //let btnNumber = todos.length - 1; 
                //Buttonlara farklı id'ler verebilmek için kullanılacak
                if (todos[i].trim().length == 0) {
                    alert("NOTHING TO DO!");
                }
                else {
                    list.innerHTML += `<li id="+listItem+"><input type="checkbox" id="xBox">${toWrite}<button class="btn">X</button></li>`;
                    document.getElementById("addText").value = "";
                }
            }
        }


        /* localStorage kısmı henüz düzgün çalışmıyor. Inputları farkı "key" değerli ile kayıt ediyor fakat sayfa yenilendiğinde tekrar en baştaki key'in value'sunu değiştirerek başlıyor yeni kayde.
                function storeItems() {
                    for (var i = todos.length - 1; i < todos.length; i++) {
                        window.localStorage.setItem(JSON.stringify(todos.length - 1), JSON.stringify(todos[i]))
                    }
                }
        
                function retrieveRecords() {
                    for (var i = 0; i < todos.length-1; i++) {
                        //var key = window.localStorage.getItem(JSON.stringify(todos.length[i] - 1));
                        list.innerHTML += `<li id="+listItem+"><input type="checkbox" id="xBox">${key}<button class="btn">X</button></li>`;
                    }
                }
        
                window.onload = retrieveRecords();
        */

        /* Sources
        https://stackoverflow.com/questions/52603796/to-do-list-with-array-and-functions
        */


        /* TODO LIST CREATED WITHOUT USING ARRAY
        const input = document.getElementById("addText");
        input.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("submitButton").click();
            }
        });

        function addElements() {
            addContent();
        }

        function addContent() {
            const list = document.getElementById("list");
            const input = document.querySelector("#addText").value;

            if (input.trim().length == 0) {
                alert("NOTHING TO DO!");
            }
            else {
                list.innerHTML += `<li id="+listItem+"><input type="checkbox" id="xBox">${input}<button class="btn" onclick="removeItem()">X</button></li>`;
                document.getElementById("addText").value = "";
            }

            // Çalışmıyor. 
            const button = document.getElementsByClassName("btn");
            button.addEventListener("click", function () {
                const toRemove = document.getElementById("listItem");
                toRemove.remove();
            });
        } 
*/
    </script>
</body>

</html>

<!-- Sources -->
<!-- 
    https://stackoverflow.com/questions/20673959/how-to-add-new-li-to-ul-onclick-with-javascript

    https://www.geeksforgeeks.org/how-to-clear-form-after-submit-in-javascript-without-using-reset/
 -->